{
  "name": "s3-bucket",
  "description": "S3 bucket with secure defaults, optional versioning, lifecycle, and encryption.",
  "category": "storage",
  "inputs": [
    {
      "name": "bucket_name",
      "type": "string",
      "description": "Bucket name (must be globally unique)."
    },
    {
      "name": "versioning_enabled",
      "type": "bool",
      "default": false,
      "description": "Enable S3 object versioning."
    },
    {
      "name": "public_access_block",
      "type": "object({ block_public_acls = bool, block_public_policy = bool, restrict_public_buckets = bool, ignore_public_acls = bool })",
      "default": {
        "block_public_acls": true,
        "block_public_policy": true,
        "restrict_public_buckets": true,
        "ignore_public_acls": true
      },
      "description": "Public access block settings for the bucket."
    },
    {
      "name": "server_side_encryption",
      "type": "object({ enabled = bool, kms_key_arn = string, sse_algorithm = string })",
      "default": {
        "enabled": true,
        "kms_key_arn": "",
        "sse_algorithm": "AES256"
      },
      "description": "Server-side encryption configuration. Leave kms_key_arn empty for SSE-S3."
    },
    {
      "name": "lifecycle_rules",
      "type": "list(object({ id = string, enabled = bool, prefix = string, transition = list(object({ days = number, storage_class = string })), expiration_days = number }))",
      "default": [],
      "description": "Lifecycle rules for transitioning or expiring objects."
    },
    {
      "name": "tags",
      "type": "map(string)",
      "default": {},
      "description": "Tags to apply to the bucket."
    }
  ]
}
